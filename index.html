<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025 ìƒˆí•´ ë§ì”€ ë½‘ê¸°</title>
    <style>
        /* ê°„ë‹¨í•˜ê³  ê¹”ë”í•œ ë””ìì¸ */
        body { font-family: 'Nanum Myeongjo', serif; background-color: #f4f1ea; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .container { text-align: center; background: white; padding: 3rem; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); max-width: 80%; }
        h1 { color: #4a4a4a; font-size: 1.5rem; margin-bottom: 2rem; }
        #verse-content { font-size: 1.3rem; line-height: 1.8; margin-bottom: 1.5rem; min-height: 100px; color: #2c3e50; }
        #verse-ref { font-size: 1rem; color: #95a5a6; margin-bottom: 2rem; }
        button { background-color: #c0a080; color: white; border: none; padding: 12px 25px; border-radius: 50px; cursor: pointer; font-size: 1rem; transition: 0.3s; }
        button:hover { background-color: #a68a6d; transform: translateY(-2px); }
        .loading { opacity: 0.5; pointer-events: none; }
    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ“– 2025 ìƒˆí•´ í•˜ë‚˜ë‹˜ì´ ì£¼ì‹œëŠ” ë§ì”€</h1>
    <div id="verse-content">"ë²„íŠ¼ì„ ëˆŒëŸ¬ ì˜¬í•´ì˜ ë§ì”€ì„ í™•ì¸í•˜ì„¸ìš”"</div>
    <div id="verse-ref"></div>
    <button onclick="getRandomVerse()" id="draw-btn">ë§ì”€ ë½‘ê¸°</button>
</div>

<script>
    // ì„±ê²½ ê° ê¶Œì˜ ì¥ ìˆ˜ ë°ì´í„° (Bolls Life API ê¸°ì¤€)
    // ì‹¤ì œë¡œëŠ” ë” ì •ë°€í•œ ë°ì´í„°ê°€ í•„ìš”í•˜ì§€ë§Œ, ìš°ì„  66ê¶Œ ë²”ìœ„ë¥¼ ì§€ì •í•©ë‹ˆë‹¤.
    async function getRandomVerse() {
        const btn = document.getElementById('draw-btn');
        const contentDiv = document.getElementById('verse-content');
        const refDiv = document.getElementById('verse-ref');

        btn.classList.add('loading');
        contentDiv.innerText = "ë§ì”€ì„ ì°¾ëŠ” ì¤‘...";
        refDiv.innerText = "";

        try {
            // 1. ëœë¤ìœ¼ë¡œ ê¶Œ(Book) ì„ íƒ (1~66)
            const bookId = Math.floor(Math.random() * 66) + 1;
            
            // 2. í•´ë‹¹ ê¶Œì˜ ì¥(Chapter) ì •ë³´ë¥¼ ê°€ì ¸ì˜´
            const chaptersResp = await fetch(`https://bolls.life/get-chapters/KRV/${bookId}/`);
            const chapters = await chaptersResp.json();
            const randomChapter = chapters[Math.floor(Math.random() * chapters.length)].chapter;

            // 3. í•´ë‹¹ ì¥ì˜ ì ˆ(Verse) ì •ë³´ë¥¼ ê°€ì ¸ì˜´
            const versesResp = await fetch(`https://bolls.life/get-text/KRV/${bookId}/${randomChapter}/`);
            const verses = await versesResp.json();
            const randomVerse = verses[Math.floor(Math.random() * verses.length)];

            // 4. í™”ë©´ì— ì¶œë ¥
            contentDiv.innerText = `"${randomVerse.text}"`;
            // API ê²°ê³¼ê°’ì— ë”°ë¼ ì„±ê²½ ì´ë¦„ ë§¤ì¹­ì´ í•„ìš”í•  ìˆ˜ ìˆìœ¼ë‚˜, ê¸°ë³¸ì ìœ¼ë¡œ ì •ë³´ë¥¼ ì œê³µí•¨
            refDiv.innerText = `[${randomVerse.book_name} ${randomVerse.chapter}:${randomVerse.verse}]`;
            
        } catch (error) {
            contentDiv.innerText = "ë§ì”€ì„ ë¶ˆëŸ¬ì˜¤ëŠ”ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.";
            console.error(error);
        } finally {
            btn.classList.remove('loading');
            btn.innerText = "ë‹¤ì‹œ ë½‘ê¸°";
        }
    }
</script>
</body>
</html>